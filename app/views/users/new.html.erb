<h1>ユーザー登録</h1>


<div class="row">
  <div class="col-lg-8 offset-lg-2">

    <%= form_with(model: @user, local: true) do |f| %>
    <%= render 'layouts/error_messages', model: f.object %>

      <div class="form-group">
        <%= f.label :name, '名前　※20文字以内' %>
        <%= f.text_field :name, class: 'form-control',maxlength:20 %>
      </div>

      <div class="form-group">
        <%= f.label :email, 'e-mail　※80文字以内' %>
        <%= f.email_field :email, class: 'form-control',maxlength:80 %>
      </div>

      <div class="form-group">
        <%= f.label :password, 'パスワード' %><span>※20文字以内</span>
        <%= f.password_field :password, class: 'form-control',maxlength:20 %>
      </div>

      <div class="form-group">
        <%= f.label :password_confirmation, 'パスワード確認' %><span>※20文字以内</span>
        <%= f.password_field :password_confirmation, class: 'form-control',maxlength:20 %>
      </div>

      <div class="form-group">
        <%=f.label "自画像をアップロード" %>
        <div class="upImage__preview">
          <%= image_tag @user.prof_image.url, id: :img_prev %>
          <%= f.file_field :prof_image, class: 'form-control-file', id: :up_img %>
          <%= f.hidden_field :prof_image_cache %>
          <script type="text/javascript">
            $(function () {
              function readURL(input) {
                if (input.files && input.files[0]) {
                  var reader = new FileReader();
                  reader.onload = function (e) {
                    $('#img_prev').attr('src', e.target.result);
                  }
                  reader.readAsDataURL(input.files[0]);
                } else {
                  $('#img_prev').attr('src', '')
                }
              }
              $("#up_img").change(function () {
                readURL(this);
              });
            });
          </script>
        </div>

      </div>

      <div class="form-group offset-5">
        <%= f.submit '登録する', class: 'btn btn-primary' %>
      </div>

    <% end %>
  </div>
</div>
